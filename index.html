<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¨Ù‚Ø§Ù„ÙŠØ©</title>

<style>
body{
 margin:0;
 font-family:Tahoma, Arial;
 background:#f2fdf9;
 padding-bottom:200px;
}
header{
 background:#0f766e;
 color:#fff;
 padding:14px;
 text-align:center;
 font-size:20px;
 font-weight:bold;
}
.banner{
 padding:10px;
}
.banner img{
 width:100%;
 border-radius:16px;
}
.search-box{
 padding:10px;
}
.search-box input{
 width:100%;
 padding:10px;
 font-size:16px;
 border-radius:10px;
 border:1px solid #ccc;
}
.products{
 padding:10px;
 display:grid;
 grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
 gap:12px;
}
.card{
 background:#fff;
 border-radius:14px;
 padding:10px;
 text-align:center;
 box-shadow:0 4px 10px rgba(0,0,0,.1);
}
.card img{
 width:100%;
 height:110px;
 object-fit:cover;
 border-radius:10px;
}
.qty{
 display:flex;
 justify-content:center;
 gap:10px;
 margin:6px 0;
}
.qty button{
 width:30px;height:30px;
 border:none;border-radius:50%;
 background:#0f766e;color:#fff;font-size:18px;
}
.card button{
 width:100%;
 padding:8px;
 border:none;
 border-radius:10px;
 background:#0f766e;
 color:#fff;
}
.cart{
 position:fixed;
 bottom:0;left:0;right:0;
 background:#fff;
 padding:10px;
 border-top:2px solid #0f766e;
}
.cart-item{
 display:flex;
 justify-content:space-between;
 font-size:14px;
 margin-bottom:4px;
}
.remove{
 color:red;
 cursor:pointer;
}
.total{
 color:red;
 font-weight:bold;
 margin-top:6px;
}
.whatsapp{
 width:100%;
 padding:14px;
 margin-top:6px;
 background:#25D366;
 border:none;
 border-radius:14px;
 font-size:18px;
 color:#fff;
}
footer{
 margin-top:20px;
 padding:10px;
 text-align:center;
}
footer img{
 width:100%;
 border-radius:16px;
}
</style>
</head>

<body>

<!-- ØµÙˆØ±Ø© Ø£Ø¨Ùˆ Ø­Ù…Ø²Ø© -->
<div class="banner">
 <img src="banner.jpg" alt="Ø£Ø¨Ùˆ Ø­Ù…Ø²Ø©">
</div>

<header>ğŸ§º ØªØ³ÙˆÙ‚ Ø§Ù„Ø®Ø¶Ø±ÙˆØ§Øª ÙˆØ§Ù„ÙÙˆØ§ÙƒÙ‡</header>

<div class="search-box">
 <input type="text" id="search" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬">
</div>

<div class="products" id="products"></div>

<div class="cart">
 <div id="cartItems"></div>
 <div class="total" id="total">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 0 Ø¯ÙŠÙ†Ø§Ø±</div>
 <button class="whatsapp" onclick="send()">ğŸ“² Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>
</div>

<footer>
 <img src="banner.jpg" alt="Ø£Ø¨Ùˆ Ø­Ù…Ø²Ø©">
</footer>

<script>
const phoneTrader="9647700957240";
const delivery=1000;

let products=[], cart=[], weights=[];
const box=document.getElementById("products");

/* ğŸ”— Google Sheet */
fetch("https://opensheet.elk.sh/1VDPFkYkKQUfPNtU7xneBxUyYObotJtip5FdK42KCqzE/Sheet1")
.then(r=>r.json())
.then(d=>{
 products=d;
 render();
});

function render(){
 box.innerHTML="";
 products
 .filter(p=>p.name.includes(search.value))
 .forEach((p,i)=>{
  weights[i]=1;
  box.innerHTML+=`
  <div class="card">
   <img src="images/${p.img}.jpg" onerror="this.src='images/placeholder.jpg'">
   <h4>${p.name}</h4>
   <p>${p.price} Ø¯ÙŠÙ†Ø§Ø± / ÙƒØºÙ…</p>
   <div class="qty">
    <button onclick="chg(${i},-0.5)">âˆ’</button>
    <b id="w${i}">1</b>
    <button onclick="chg(${i},0.5)">+</button>
   </div>
   <button onclick="add(${i})">Ø¥Ø¶Ø§ÙØ©</button>
  </div>`;
 });
}

search.oninput=render;

function chg(i,v){
 weights[i]=Math.max(0.5,weights[i]+v);
 document.getElementById("w"+i).innerText=weights[i];
}

function add(i){
 cart.push({
  name:products[i].name,
  price:+products[i].price,
  w:weights[i]
 });
 updateCart();
}

function updateCart(){
 let sum=0;
 cartItems.innerHTML="";
 cart.forEach((c,i)=>{
  let cost=c.price*c.w;
  sum+=cost;
  cartItems.innerHTML+=`
  <div class="cart-item">
   <span>${i+1}- ${c.name} ${c.w}ÙƒØºÙ…</span>
   <span>${cost} <span class="remove" onclick="del(${i})">âŒ</span></span>
  </div>`;
 });
 total.innerText=
  `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${sum} Ø¯ÙŠÙ†Ø§Ø± | Ø§Ù„ØªÙˆØµÙŠÙ„: ${delivery} | Ø§Ù„ÙƒÙ„ÙŠ: ${sum+delivery}`;
}

function del(i){
 cart.splice(i,1);
 updateCart();
}

function send(){
 if(!cart.length){alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");return;}
 let msg="ğŸ§¾ ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨\n";
 let sum=0;
 cart.forEach((c,i)=>{
  let cost=c.price*c.w;
  sum+=cost;
  msg+=`${i+1}) ${c.name} ${c.w}ÙƒØºÙ… = ${cost} Ø¯ÙŠÙ†Ø§Ø±\n`;
 });
 msg+=`------------------\nØ§Ù„ØªÙˆØµÙŠÙ„: ${delivery}\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${sum+delivery}`;
 location.href="https://wa.me/"+phoneTrader+"?text="+encodeURIComponent(msg);
}
</script>

</body>
</html>